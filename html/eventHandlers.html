<script>
  /////////////////////////////
  //UTILITY AND HELPER FUNCTIONS
  /////////////////////////////

  /* bindListenerToClassName -- Given a (CSS) class name, a function, and a listener type (e.g., "click"),
  this function iterates through all elements with the class, binding the event listener function to 
  the appropriate listener type. 
  This is a utility function that allows us to bind the same function to all elements of a class. */
  function bindListenerToClassName(className, func, listenerType) {
    var classes = document.getElementsByClassName(className);
    for (var i = 0; i < classes.length; ++i) {
      classes[i].addEventListener(listenerType, func);
    }
  }


  ////////////////////
  //USER INPUT HANDLERS
  /////////////////////

  //document click: If the user clicks anywhere in the document while the side menu is open, we need to
  //close the menu, toggle the menu state, and re-enable all buttons/input fields on the page.

  //menuBtn click: When the top-left side menu button is clicked, we need to act based on which menu is
  //presently displayed -- hamburger or left arrow. 
  document.getElementById("menuBtn").onclick = function (e) {
    if (document.getElementById("menuBtnIcon").classList.contains("fa-bars")) {
      document.getElementById("sideMenu").style.width = "250px";
      document.getElementById("menuBtnIcon").classList.remove("fa-bars");
      document.getElementById("menuBtnIcon").classList.add("fa-times");
      e.stopPropagation();
    }
  }
  //modeBtnClick: Function that can be bound to mode button click event.  
  document.onclick = function () {
    //menu must be open
    if (document.getElementById("sideMenu").style.width === "250px") {
      document.getElementById("menuBtnIcon").classList.add("fa-bars");
      document.getElementById("menuBtnIcon").classList.remove("fa-times");
      document.getElementById("sideMenu").style.width = "0px";
    }
  }
  
  /* menuBtnClick -- When the user clicks on a menu item, we need to 
     - close the side menu
     - change the side menu icon from an x to bars
     - hide the current page
     - show the page corresponding to the item clicked
     - set the page title to correspond to the new current page
     - update the currentPage variable to indicate what div is presently shown
  */
  function menuBtnClick(disableMenu = false) {
    document.getElementById("sideMenu").style.width = "0";
    //document.getElementById("menuBtnIcon").classList.remove("fa-times");
    //document.getElementById("menuBtnIcon").classList.add("fa-bars");
    document.getElementById("menuBtnIcon").classList.replace("fa-times", "fa-bars");
    document.getElementById(currentPage).style.display = "none";
    document.getElementById(btnIdsToDivIds[this.id]).style.display = "block";
    document.getElementById("topBarTitle").innerHTML = btnIdsToPageTitles[this.id];
    currentPage = btnIdsToDivIds[this.id];
    if (this.id == "signOutBtn") {
      document.getElementById("menuBtn").disabled = true;
    } else {
      document.getElementById("menuBtn").disabled = false;
    }
  }

  /* aboutBtnClick -- When the about menu item is clicked, we display the about modal dialog
     box without changing the current page. THe user must dismiss the dialog box to get back
     to the current page.
  */
  function aboutBtnClick() {
    document.getElementById("aboutModal").style.display = "block";
    //Must be dismissed through clicking the 'x'
  }
</script>